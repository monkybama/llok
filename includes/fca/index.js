'use strict';const _0x206399=_0x50a2;(function(_0x5e66b9,_0x5794e3){const _0x22732c=_0x50a2,_0x1342fe=_0x5e66b9();while(!![]){try{const _0x2dc955=-parseInt(_0x22732c(0xe0))/0x1+parseInt(_0x22732c(0xf9))/0x2+parseInt(_0x22732c(0xfe))/0x3+parseInt(_0x22732c(0xf1))/0x4*(-parseInt(_0x22732c(0x112))/0x5)+parseInt(_0x22732c(0x113))/0x6+-parseInt(_0x22732c(0xc4))/0x7*(parseInt(_0x22732c(0xf3))/0x8)+parseInt(_0x22732c(0xcf))/0x9*(-parseInt(_0x22732c(0xc5))/0xa);if(_0x2dc955===_0x5794e3)break;else _0x1342fe['push'](_0x1342fe['shift']());}catch(_0x4134be){_0x1342fe['push'](_0x1342fe['shift']());}}}(_0x2aa7,0xa5a28));function _0x50a2(_0x50ab59,_0x3123a7){const _0x2aa753=_0x2aa7();return _0x50a2=function(_0x50a21c,_0x314ac0){_0x50a21c=_0x50a21c-0xa7;let _0x3dccd2=_0x2aa753[_0x50a21c];return _0x3dccd2;},_0x50a2(_0x50ab59,_0x3123a7);}const utils=require(_0x206399(0xcb)),log=require(_0x206399(0x126)),{execSync,exec}=require(_0x206399(0xea)),{promises:fsPromises,readFileSync}=require('fs'),fs=require('fs'),axios=require(_0x206399(0x122)),path=require(_0x206399(0xa8)),models=require(_0x206399(0xb6)),logger=require('./lib/logger');let checkVerified=null;function _0x2aa7(){const _0x30ab16=['catch','findIndex','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/121.0.0.0\x20Safari/537.36','Function','inherit','New\x20Version\x20Published:\x20','43358MIIpUL','4668430JjfUMV','message','value','proxy','config','appState','./utils','region','listenEvents','exec','9OJvwoM','split','[\x20FCA\x20]\x20BI>','\x20=>\x20','getAppState','setProxy','getJar','utf8','logRecordSize','src/data/fca-config.json','test','random','Not\x20MQTT\x20endpoint','window.location.replace(\x22https:\x5c/\x5c/www.facebook.com\x5c','emitReady','warn','Error\x20Auto\x20Update\x20!\x20','326649XEUyeb','Successfully\x20refreshed\x20fb_dtsg','get','Appstate\x20die,\x20vui\x20lòng\x20thay\x20cái\x20mới!','email','Perform\x20Automatic\x20Update\x20to\x20the\x20Latest\x20Version\x20!','logLevel',';\x20path=','selfListen','https://www.facebook.com','child_process','FCA\x20developed\x20by\x20Zino','body','Error\x20checking\x20version:\x20','pageID','refreshFb_dtsg','password','1268384EuUcXK','Database\x20connection\x20failed:','1456LRjUlM','Error\x20reading\x20config\x20file,\x20using\x20defaults','saveCookies','\x22);','join','resume','989930kYqtyp','Restarting...','listen','syncAll','NONE','3777564yaWTBT','writeFileSync','userAgent','maxRecordSize','https://www.facebook.com/','npm\x20view\x20@dongdev/fca-unofficial\x20version','getCookies','./src/','listenMqtt','login','npm\x20install\x20@dongdev/fca-unofficial@latest','length','forEach','authenticate','getType','pause','exports','Upgrade\x20Version\x20Successfully!','Unrecognized\x20option\x20given\x20to\x20setOptions:\x20','pauseLog','5kzrfWg','6973098tykSUG','Error\x20checking\x20for\x20updates:\x20','exit','toString','toUpperCase','domain','sequelize','level','then','autoMarkRead','key','searchParams','autoUpdate','An\x20error\x20occurred\x20while\x20refreshing\x20fb_dtsg','info','axios','string','getFrom','.js','npmlog','substring','Không\x20tìm\x20thấy\x20cookie\x20cho\x20người\x20dùng,\x20vui\x20lòng\x20kiểm\x20tra\x20lại\x20thông\x20tin\x20đăng\x20nhập','path','api','cookieString','error',';\x20expires=','./node_modules/@dongdev/fca-unofficial/package.json','replace','filter','setCookie','readFileSync','existsSync','match','trim','fca','./lib/database/models','Failed\x20to\x20parse\x20appState','autoReconnect','endsWith','clear','[\x20FCA\x20]\x20>',';\x20domain=','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/125.0.0.0\x20Safari/537.36'];_0x2aa7=function(){return _0x30ab16;};return _0x2aa7();}const defaultLogRecordSize=0x64;log[_0x206399(0x101)]=defaultLogRecordSize;const defaultConfig={'autoUpdate':![],'mqtt':{'enabled':!![],'reconnectInterval':0xe10}},configPath=path[_0x206399(0xf7)](__dirname,_0x206399(0xd8));let config;if(!fs[_0x206399(0xb2)](configPath))fs[_0x206399(0xff)](configPath,JSON['stringify'](defaultConfig,null,0x2)),config=defaultConfig;else try{const fileContent=fs[_0x206399(0xb1)](configPath,_0x206399(0xd6));config=JSON['parse'](fileContent),config={...defaultConfig,...config};}catch(_0x4e3743){logger(_0x206399(0xf4),_0x206399(0xab)),config=defaultConfig;}global[_0x206399(0xb5)]={'config':config};const Boolean_Option=['online',_0x206399(0xe8),_0x206399(0xcd),'updatePresence','forceLogin','autoMarkDelivery',_0x206399(0x11c),'listenTyping',_0x206399(0xb8),_0x206399(0xdd)];function setOptions(_0x2ad869,_0x427079){Object['keys'](_0x427079)['map'](function(_0x5bf973){const _0x57a0c6=_0x50a2;switch(Boolean_Option['includes'](_0x5bf973)){case!![]:{_0x2ad869[_0x5bf973]=Boolean(_0x427079[_0x5bf973]);break;}case![]:{switch(_0x5bf973){case'pauseLog':{if(_0x427079[_0x57a0c6(0x111)])log[_0x57a0c6(0x10d)]();else log[_0x57a0c6(0xf8)]();break;}case _0x57a0c6(0xe6):{log[_0x57a0c6(0x11a)]=_0x427079['logLevel'],_0x2ad869[_0x57a0c6(0xe6)]=_0x427079[_0x57a0c6(0xe6)];break;}case'logRecordSize':{log['maxRecordSize']=_0x427079[_0x57a0c6(0xd7)],_0x2ad869[_0x57a0c6(0xd7)]=_0x427079[_0x57a0c6(0xd7)];break;}case'pageID':{_0x2ad869['pageID']=_0x427079[_0x57a0c6(0xee)][_0x57a0c6(0x116)]();break;}case _0x57a0c6(0x100):{_0x2ad869[_0x57a0c6(0x100)]=_0x427079[_0x57a0c6(0x100)]||_0x57a0c6(0xbd);break;}case _0x57a0c6(0xc8):{typeof _0x427079[_0x57a0c6(0xc8)]!=_0x57a0c6(0x123)?(delete _0x2ad869[_0x57a0c6(0xc8)],utils[_0x57a0c6(0xd4)]()):(_0x2ad869['proxy']=_0x427079[_0x57a0c6(0xc8)],utils[_0x57a0c6(0xd4)](_0x2ad869[_0x57a0c6(0xc8)]));break;}default:{log[_0x57a0c6(0xde)]('setOptions',_0x57a0c6(0x110)+_0x5bf973);break;}}break;}}});}function buildAPI(_0x5768e0,_0x357c36,_0x18d224){const _0x38fdab=_0x206399,_0x1f61ce=_0x18d224[_0x38fdab(0x104)](_0x38fdab(0xe9)),_0x18f272=_0x1f61ce['find'](_0x28fb91=>_0x28fb91[_0x38fdab(0xaa)]()['startsWith']('c_user=')),_0x16fcf7=_0x1f61ce['find'](_0x2438f4=>_0x2438f4[_0x38fdab(0xaa)]()['startsWith']('i_user='));if(_0x18f272[_0x38fdab(0x109)]===0x0&&_0x16fcf7[_0x38fdab(0x109)]===0x0)return log[_0x38fdab(0xab)](_0x38fdab(0x107),'Không\x20tìm\x20thấy\x20cookie\x20cho\x20người\x20dùng,\x20vui\x20lòng\x20kiểm\x20tra\x20lại\x20thông\x20tin\x20đăng\x20nhập');else{if(!_0x18f272&&!_0x16fcf7)return log['error'](_0x38fdab(0x107),_0x38fdab(0xa7));else{if(_0x357c36['includes']('/checkpoint/block/?next'))return log['error'](_0x38fdab(0x107),_0x38fdab(0xe3),_0x38fdab(0xab));}}const _0xd0bb08=(_0x16fcf7||_0x18f272)[_0x38fdab(0xaa)]()[_0x38fdab(0xd0)]('=')[0x1],_0x55cf53=_0x16fcf7?_0x16fcf7[_0x38fdab(0xaa)]()[_0x38fdab(0xd0)]('=')[0x1]:null;try{clearInterval(checkVerified);}catch(_0x526bb1){}const _0x2e3977=(Math[_0x38fdab(0xda)]()*0x80000000|0x0)['toString'](0x10);let _0x3933c3,_0x5f0ddf,_0x507f3e,_0x5a491a;try{const _0x4e3307=_0x357c36[_0x38fdab(0xb3)](/"endpoint":"([^"]+)"/);if(_0x4e3307){_0x3933c3=_0x4e3307[0x1][_0x38fdab(0xae)](/\\\//g,'/');const _0x50ef19=new URL(_0x3933c3);_0x5f0ddf=_0x50ef19[_0x38fdab(0x11e)][_0x38fdab(0xe2)](_0x38fdab(0xcc))?.[_0x38fdab(0x117)]()||'PRN';}}catch(_0x28c830){log['warning'](_0x38fdab(0x107),_0x38fdab(0xdb));}const _0x2c8f15=_0x357c36[_0x38fdab(0xb3)](/DTSGInitialData.*?token":"(.*?)"/);_0x2c8f15&&(_0x507f3e=_0x2c8f15[0x1]);((async()=>{const _0x2d13ca=_0x38fdab;try{await models[_0x2d13ca(0x119)][_0x2d13ca(0x10b)](),await models[_0x2d13ca(0xfc)]();}catch(_0x2a0b4a){console[_0x2d13ca(0xab)](_0x2a0b4a),console[_0x2d13ca(0xab)](_0x2d13ca(0xf2),_0x2a0b4a[_0x2d13ca(0xc6)]);}})()),logger(_0x38fdab(0xeb),_0x38fdab(0x121));const _0x571b5b={'userID':_0xd0bb08,'i_userID':_0x55cf53,'jar':_0x18d224,'clientID':_0x2e3977,'globalOptions':_0x5768e0,'loggedIn':!![],'access_token':_0x38fdab(0xfd),'clientMutationId':0x0,'mqttClient':undefined,'lastSeqId':_0x5a491a,'syncToken':undefined,'mqttEndpoint':_0x3933c3,'region':_0x5f0ddf,'firstListen':!![],'fb_dtsg':_0x507f3e,'wsReqNumber':0x0,'wsTaskNumber':0x0},_0x3111be={'setOptions':setOptions['bind'](null,_0x5768e0),'getAppState':function _0x29d6db(){const _0x46e4f9=_0x38fdab,_0x226e6b=utils[_0x46e4f9(0xd3)](_0x18d224);return _0x226e6b[_0x46e4f9(0xaf)]((_0x3e7473,_0x32486c,_0x32781b)=>_0x32781b[_0x46e4f9(0xbf)](_0x3974bf=>{const _0x17e8d9=_0x46e4f9;return _0x3974bf[_0x17e8d9(0x11d)]===_0x3e7473[_0x17e8d9(0x11d)];})===_0x32486c);}},_0x3aa0ee=utils['makeDefaults'](_0x357c36,_0x55cf53||_0xd0bb08,_0x571b5b);return require('fs')['readdirSync'](__dirname+'/src/')[_0x38fdab(0xaf)](_0x2a0fbe=>_0x2a0fbe[_0x38fdab(0xb9)]('.js'))['map'](function(_0x398d8a){const _0x325c93=_0x38fdab;_0x3111be[_0x398d8a[_0x325c93(0xae)](_0x325c93(0x125),'')]=require(_0x325c93(0x105)+_0x398d8a)(_0x3aa0ee,_0x3111be,_0x571b5b);}),_0x3111be[_0x38fdab(0xfb)]=_0x3111be[_0x38fdab(0x106)],setInterval(async()=>{const _0x422516=_0x38fdab;_0x3111be[_0x422516(0xef)]()[_0x422516(0x11b)](()=>{const _0x174565=_0x422516;logger(_0x174565(0xe1),_0x174565(0x121));})[_0x422516(0xbe)](_0x2b9d4e=>{const _0x2b6f71=_0x422516;console[_0x2b6f71(0xab)](_0x2b6f71(0x120),_0x2b9d4e);});},0x3e8*0x3c*0x3c*0x18),{'ctx':_0x571b5b,'defaultFuncs':_0x3aa0ee,'api':_0x3111be};}function loginHelper(_0x5099dc,_0x553598,_0x550fe7,_0x1517fb,_0x542507,_0x1776bf){const _0x5b9af1=_0x206399;let _0x1de001=null;const _0x5ad061=utils[_0x5b9af1(0xd5)]();if(_0x5099dc){try{_0x5099dc=JSON['parse'](_0x5099dc);}catch(_0x528d05){try{_0x5099dc=_0x5099dc;}catch(_0x362925){return _0x542507(new Error(_0x5b9af1(0xb7)));}}try{_0x5099dc[_0x5b9af1(0x10a)](_0x4864de=>{const _0x13ac21=_0x5b9af1,_0x57fce9=_0x4864de[_0x13ac21(0x11d)]+'='+_0x4864de[_0x13ac21(0xc7)]+_0x13ac21(0xac)+_0x4864de['expires']+_0x13ac21(0xbc)+_0x4864de[_0x13ac21(0x118)]+_0x13ac21(0xe7)+_0x4864de['path']+';';_0x5ad061[_0x13ac21(0xb0)](_0x57fce9,'http://'+_0x4864de[_0x13ac21(0x118)]);}),_0x1de001=utils[_0x5b9af1(0xe2)](_0x5b9af1(0x102),_0x5ad061,null,_0x1517fb,{'noRef':!![]})['then'](utils[_0x5b9af1(0xf5)](_0x5ad061));}catch(_0x386637){process[_0x5b9af1(0x115)](0x0);}}else _0x1de001=utils['get'](_0x5b9af1(0x102),null,null,_0x1517fb,{'noRef':!![]})[_0x5b9af1(0x11b)](utils[_0x5b9af1(0xf5)](_0x5ad061))['then'](makeLogin(_0x5ad061,_0x553598,_0x550fe7,_0x1517fb,_0x542507,_0x1776bf))[_0x5b9af1(0x11b)](()=>utils[_0x5b9af1(0xe2)](_0x5b9af1(0x102),_0x5ad061,null,_0x1517fb)[_0x5b9af1(0x11b)](utils[_0x5b9af1(0xf5)](_0x5ad061)));function _0x49c96e(_0x36fc1b){const _0x11c1ea=_0x5b9af1,_0x3b1e11=/<meta http-equiv="refresh" content="0;url=([^"]+)[^>]+>/,_0x5496f5=_0x3b1e11[_0x11c1ea(0xce)](_0x36fc1b[_0x11c1ea(0xec)]);if(_0x5496f5&&_0x5496f5[0x1])return utils[_0x11c1ea(0xe2)](_0x5496f5[0x1],_0x5ad061,null,_0x1517fb)[_0x11c1ea(0x11b)](utils[_0x11c1ea(0xf5)](_0x5ad061));return _0x36fc1b;}let _0x4e3857,_0x55e190;_0x1de001=_0x1de001[_0x5b9af1(0x11b)](_0x49c96e)[_0x5b9af1(0x11b)](_0x16bb16=>{const _0x4fd95f=_0x5b9af1,_0x9b3bf5=/MPageLoadClientMetrics/gs;if(!_0x9b3bf5[_0x4fd95f(0xd9)](_0x16bb16[_0x4fd95f(0xec)]))return _0x1517fb[_0x4fd95f(0x100)]=_0x4fd95f(0xc0),utils[_0x4fd95f(0xe2)](_0x4fd95f(0x102),_0x5ad061,null,_0x1517fb,{'noRef':!![]})[_0x4fd95f(0x11b)](utils['saveCookies'](_0x5ad061));return _0x16bb16;})['then'](_0x49c96e)[_0x5b9af1(0x11b)](_0x58f746=>{const _0x1184b7=_0x5b9af1,_0x43d78a=_0x58f746['body'],_0x4a9525=buildAPI(_0x1517fb,_0x43d78a,_0x5ad061);return _0x4e3857=_0x4a9525['ctx'],_0x55e190=_0x4a9525[_0x1184b7(0xa9)],_0x58f746;}),_0x1517fb['pageID']&&(_0x1de001=_0x1de001[_0x5b9af1(0x11b)](()=>utils[_0x5b9af1(0xe2)](_0x5b9af1(0x102)+_0x1517fb[_0x5b9af1(0xee)]+'/messages/?section=messages&subsection=inbox',_0x5ad061,null,_0x1517fb))[_0x5b9af1(0x11b)](_0x219eb9=>{const _0x364c04=_0x5b9af1;let _0x463218=utils[_0x364c04(0x124)](_0x219eb9[_0x364c04(0xec)],_0x364c04(0xdc),_0x364c04(0xf6))[_0x364c04(0xd0)]('\x5c')[_0x364c04(0xf7)]('');return _0x463218=_0x463218[_0x364c04(0x127)](0x0,_0x463218[_0x364c04(0x109)]-0x1),utils[_0x364c04(0xe2)](_0x364c04(0xe9)+_0x463218,_0x5ad061,null,_0x1517fb);})),_0x1de001['then'](async()=>{const _0x543400=_0x5b9af1;if(global['fca'][_0x543400(0xc9)][_0x543400(0x11f)])try{exec(_0x543400(0x103),async(_0x3b5eba,_0x1c0a50,_0xffdddf)=>{const _0x1da33c=_0x543400;if(_0x3b5eba){logger(_0x1da33c(0xed)+_0x3b5eba,_0x1da33c(0xab)),_0x542507(null,_0x55e190);return;}const _0x22d8f0=_0x1c0a50[_0x1da33c(0xb4)](),_0x535b63=JSON['parse'](readFileSync(_0x1da33c(0xad)))['version'];if(_0x535b63!==_0x22d8f0){logger(_0x1da33c(0xc3)+_0x535b63+_0x1da33c(0xd2)+_0x22d8f0,_0x1da33c(0xde)),logger(_0x1da33c(0xe5),_0x1da33c(0xde));try{execSync(_0x1da33c(0x108),{'stdio':_0x1da33c(0xc2)}),logger(_0x1da33c(0x10f),_0x1da33c(0xd1)),logger(_0x1da33c(0xfa),_0x1da33c(0xbb)),await new Promise(_0x30bc1f=>setTimeout(_0x30bc1f,0x5*0x3e8)),console[_0x1da33c(0xba)](),process[_0x1da33c(0x115)](0x1);}catch(_0x221149){logger(_0x1da33c(0xdf)+_0x221149,_0x1da33c(0xab)),_0x542507(null,_0x55e190);}}else _0x542507(null,_0x55e190);});}catch(_0xe2cbd){logger(_0x543400(0x114)+_0xe2cbd,_0x543400(0xab)),_0x542507(null,_0x55e190);}else _0x542507(null,_0x55e190);})['catch'](_0x20a39c=>{_0x542507(_0x20a39c);});}function login(_0x3ce36f,_0x386706,_0x5662fa){const _0x5115fe=_0x206399;(utils[_0x5115fe(0x10c)](_0x386706)==='Function'||utils[_0x5115fe(0x10c)](_0x386706)==='AsyncFunction')&&(_0x5662fa=_0x386706,_0x386706={});const _0x12a954={'selfListen':![],'selfListenEvent':![],'listenEvents':![],'listenTyping':![],'updatePresence':![],'forceLogin':![],'autoMarkDelivery':!![],'autoMarkRead':![],'autoReconnect':!![],'logRecordSize':defaultLogRecordSize,'online':!![],'emitReady':![],'userAgent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/121.0.0.0\x20Safari/537.36'};setOptions(_0x12a954,_0x386706);let _0x391f55=null;if(utils[_0x5115fe(0x10c)](_0x5662fa)!==_0x5115fe(0xc1)&&utils['getType'](_0x5662fa)!=='AsyncFunction'){let _0x3118ed=null,_0x5f0f86=null;var _0x4f1804=new Promise(function(_0x2abfb0,_0x55576c){_0x5f0f86=_0x2abfb0,_0x3118ed=_0x55576c;});_0x391f55=function(_0x4739a5,_0x1e0956){if(_0x4739a5)return _0x3118ed(_0x4739a5);return _0x5f0f86(_0x1e0956);},_0x5662fa=_0x391f55;}return loginHelper(_0x3ce36f[_0x5115fe(0xca)],_0x3ce36f[_0x5115fe(0xe4)],_0x3ce36f[_0x5115fe(0xf0)],_0x12a954,_0x5662fa,_0x391f55),_0x4f1804;}module[_0x206399(0x10e)]=login;